plugins {
    id 'java'
    id 'net.ltgt.errorprone' version '1.2.1'
    id 'pmd'
    id 'checkstyle'
    id 'jacoco'
}

version = '0.0.1'
group = ''

def versions = [
    pmd: '6.28.0',
    checkstyle: '8.36.2'
]

repositories {
    jcenter()
}

dependencies {
    errorprone("com.google.errorprone:error_prone_core:latest.release")
    // JDK 8 support
    errorproneJavac("com.google.errorprone:javac:9+181-r4173-1")
}

java {
    sourceCompatibility = JavaVersion.VERSION_1_8
    targetCompatibility = JavaVersion.VERSION_1_8
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

pmd {
    toolVersion versions.pmd
    ignoreFailures = false
    consoleOutput = true
    sourceSets = [sourceSets.main]
    rulePriority = 5
    ruleSetFiles = files("pmd.xml")
    ruleSets = []
}

checkstyle {
    configFile = file('checkstyle.xml')
    toolVersion = versions.checkstyle
    ignoreFailures = false
}
